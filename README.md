# Веб-приложение "Сходим на шашлыки"
Приложение предназначено для организации встреч с друзьями и знакомыми в назначенных местах. 
## Описание
В приложении реализовано просмотр событий, подписка на события других пользователей, а также создавать свои собственные события и загружать фотографии, писать комментарии к событиям. Подписка происходит по электронной почте, на нее же приходят уведомления о новом добавленном фотографии/комментарии к событию, а создателю события прилетают на email уведомления о новых подписчиках. 

При создании события, есть возможность сделать ее приватной и доступ к ней могут получить лишь по PIN-коду, а также у созданных событий также есть возможность изменить ихдоступ и сделать приватными.

Версия приложения на [VPS](http://veganbbq.ru)(DigitalOcean)

Версия приложения на [heroku](https://sheltered-retreat-16079.herokuapp.com)(демо-версия).


## Основные характеристики приложения:
ruby version 2.7

rails version 6.0.3

webpacker version ~> 4.0

## Запуск приложения на локалхосте

1. Необходимо скачать либо клонировать репозиторий с игрой

   ```git clone git@github.com:quietpochatok/bbq.git```

2. В репозитории отстуствуют файлы `config/database.yml`, `config/master.key`. 
   >Их нужно создать, без них приложение не будет функционировать.

3. Перейти в терминале в папку с файлами программы и выполнить

   ```bundle && bundle exec rake db:migrate```

   затем

   ```yarn```

3. Запуск приложения в локалхост осуществляется в терминале
   
   3.1 запуск сервера rails
   
   ```bundle exec rails s```
  
   3.2 запуск сервера webpacker для сборки стилей, скриптов и т.д.
   
   ```bin/webpack-dev-server```
   
## Запуск приложения на удаленном сервере

Перед началом запуска приложения  на удаленном сервере, стоит рассказать о нюансах настройки приложения.

Первый нюанс состоит в том, что для отправки писем по электронной почте используется gem [mailjet](https://github.com/mailjet/mailjet-gem) и сервис [Мailjet](https://www.mailjet.com).

Второй нюанс состоит в том, что используется gem [fog-aws](https://github.com/fog/fog-aws), при его использовании фотографии хранятся либо локально, либо в фоге, если приложение работает на удалённом сервере. 

Резимируя выше сказанное, для корректной работы приложения на удаленном сервере необходимо, как минимум:
1. Завести аккаунт на Amazon. 

   1.2 Перейти в консоль управления AWS, зарегистрироваться снова уже на AWS, создать пользователя
  
   1.2 Там же найти и подключить сервис S3, создать корзину, которой будет пользоваться созданный ранее юзер.
   
   1.3. Прописать переменные окружения для подключения к сервису Amazon S3 Storage:
   
   `S3_ACCESS_KEY,S3_BUCKET_NAME,S3_BUCKET_REGION`

2. Завести аккаунт на Mailjet

   2.1 Потвердить почту на сервисе Mailjet, которая будет использоваться собственно для отправки писем.
   > внутри сайта есть подробнейшие инструкции для различных конфигурации и настроек.
   
   2.2 Прописать переменные окружения для подключения к сервису Mailjet:
   
   `MAILJET_SENDER, MAILJET_API_KEY, MAILJET_SECRET_KEY`

   > Для того, что прописать и использовать переменные окружения, в проекте использовался gem 'dotenv-rails'. На странице гема можно найти инструкции как это сделать.

3. Настроить сервер, на который будет деплоиться приложения. На этом этапе слишком большой перечень настроек, поэтому могу порекомендовать только искать информацию в интернете, как настраивать.
 
4. В репозитории отстуствуют файлы `config/database.yml`, `config/master.key`, `.env`. 
   >Их нужно создать, без них приложение не будет функционировать.


Автор: Хасанов Дамир ([quietpochatok](https://github.com/quietpochatok)).
